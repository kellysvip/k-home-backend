import request from "supertest";
import app from "../../../app";

describe("Posts", () => {
  test("GET / --> Get all posts an user can see with pagination", async () => {
    const { body } = await request(app)
      .get("/api/posts")
      .set(
        "Authorization",
        "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2M2IzZThkNjQwYjM0N2QxMjZlNmMzNDEiLCJpYXQiOjE2NzYyMDk5MjQsImV4cCI6MTY3NjI5NjMyNH0.paqUOcPhtOZw7_xmhpNeRjhCOwdF4eItvTCkuBv0EZo"
      )
      .query({ page: 1, limit: 10 })
      .expect(200);
    expect(body).toEqual({
      "data": {
          "posts": [
              {
                  "_id": "63e8f1978d6279daa8f9eb75",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://cloud.mogi.vn/images/2023/01/11/346/7c4e6fffd0334bbf94bdc9c5ba0b0f88.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "reserve",
                  "isDeleted": false,
                  "createdAt": "2023-02-12T14:03:03.559Z",
                  "updatedAt": "2023-02-12T14:03:03.559Z",
                  "__v": 0
              },
              {
                  "_id": "63e8f156a3a8f9477e282f2b",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://cloud.mogi.vn/images/2023/01/11/346/7c4e6fffd0334bbf94bdc9c5ba0b0f88.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "reserve",
                  "isDeleted": false,
                  "createdAt": "2023-02-12T14:01:58.816Z",
                  "updatedAt": "2023-02-12T14:01:58.816Z",
                  "__v": 0
              },
              {
                  "_id": "63e8f0cbae5a0e238ee2e7e7",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://cloud.mogi.vn/images/2023/01/11/346/7c4e6fffd0334bbf94bdc9c5ba0b0f88.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "reserve",
                  "isDeleted": false,
                  "createdAt": "2023-02-12T13:59:39.807Z",
                  "updatedAt": "2023-02-12T13:59:39.807Z",
                  "__v": 0
              },
              {
                  "_id": "63e8efd410d877ed8ed45921",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://cloud.mogi.vn/images/2023/01/11/346/7c4e6fffd0334bbf94bdc9c5ba0b0f88.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "reserve",
                  "isDeleted": false,
                  "createdAt": "2023-02-12T13:55:32.353Z",
                  "updatedAt": "2023-02-12T13:55:32.353Z",
                  "__v": 0
              },
              {
                  "_id": "63e8ef692be4142cbee0cedb",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://cloud.mogi.vn/images/2023/01/11/346/7c4e6fffd0334bbf94bdc9c5ba0b0f88.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "reserve",
                  "isDeleted": false,
                  "createdAt": "2023-02-12T13:53:45.415Z",
                  "updatedAt": "2023-02-12T13:53:45.415Z",
                  "__v": 0
              },
              {
                  "_id": "63e67f42100489d90d474292",
                  "author": {
                      "_id": "63bea9833cb3163905b4b085",
                      "name": "Apper",
                      "email": "testapp@gm.com",
                      "phoneNumber": "0906648572",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675273106/37d0d0f8369d408eb609d99a68273218_hmiinh.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "facebookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-11T12:20:19.964Z",
                      "updatedAt": "2023-02-10T17:30:42.804Z",
                      "__v": 0
                  },
                  "title": "daa",
                  "imageUrl": [
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1676050243/43b6cf13f5a844b0ad32da55c6be91ea_h7hkrt.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1676050243/7c37c5abdc3e4c9bba2fce338d2b91a8_oxcdiy.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1676050241/4318449d281f4377b2fd2bd23981571e_euikti.jpg"
                  ],
                  "address": "District 2",
                  "price": 2.5,
                  "noBedroom": 1,
                  "noBathroom": 1,
                  "description": "ssss",
                  "area": "25",
                  "status": "available",
                  "isDeleted": false,
                  "createdAt": "2023-02-10T17:30:42.707Z",
                  "updatedAt": "2023-02-10T17:30:42.707Z",
                  "__v": 0
              },
              {
                  "_id": "63e48900084e5c168d44093d",
                  "author": {
                      "_id": "63bea9833cb3163905b4b085",
                      "name": "Apper",
                      "email": "testapp@gm.com",
                      "phoneNumber": "0906648572",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675273106/37d0d0f8369d408eb609d99a68273218_hmiinh.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "facebookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-11T12:20:19.964Z",
                      "updatedAt": "2023-02-10T17:30:42.804Z",
                      "__v": 0
                  },
                  "title": "zzz",
                  "imageUrl": [
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675921664/43b6cf13f5a844b0ad32da55c6be91ea_wvvkqe.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675921664/7c37c5abdc3e4c9bba2fce338d2b91a8_rpopuk.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675921664/4318449d281f4377b2fd2bd23981571e_adkc0s.jpg"
                  ],
                  "address": "District 3",
                  "price": 2.5,
                  "noBedroom": 1,
                  "noBathroom": 2,
                  "description": "zzzz",
                  "area": "25",
                  "status": "available",
                  "isDeleted": false,
                  "createdAt": "2023-02-09T05:47:44.454Z",
                  "updatedAt": "2023-02-09T05:47:44.454Z",
                  "__v": 0
              },
              {
                  "_id": "63e29222e4e2fb369b970b1f",
                  "author": {
                      "_id": "63b3e8d640b347d126e6c341",
                      "name": "NH Tris",
                      "email": "test02ss@gm.com",
                      "phoneNumber": "0966044195",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1674623964/d76c907e70a64c979973fca1cce7945f_xqj8hr.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "faceBookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-03T08:35:34.817Z",
                      "updatedAt": "2023-02-12T14:07:37.445Z",
                      "__v": 0,
                      "facebookLink": "https://www.facebook.com/tri.nguyenhuu.3979"
                  },
                  "title": "Duplex 2 gi∆∞·ªùng ng·ªß, Q10 gi√° r·∫ª, 7tr5",
                  "imageUrl": [
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675792929/43b6cf13f5a844b0ad32da55c6be91ea_krelcz.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675792929/7c37c5abdc3e4c9bba2fce338d2b91a8_hrhawd.jpg",
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675792930/4318449d281f4377b2fd2bd23981571e_u5hhie.jpg"
                  ],
                  "address": "District 10",
                  "price": 7.5,
                  "noBedroom": 2,
                  "noBathroom": 1,
                  "description": "====cho thu√™ duplex qu·∫≠n 10 , Nh·∫≠t T·∫£o\n- 2 pn 1wc, full n·ªôi th·∫•t nh∆∞ h√¨nh\n- ph√≤ng m·ªõi ho√†n to√†n 100% nh∆∞ h√¨nh\n-- s·∫°ch s·∫Ω c·ª≠a s·ªï tho√°ng m√°t\n-- c√≥ ch·ªó ƒë·ªÉ xe tho√°ng m√°t, d·∫•u v√¢n tay\n-- Khu y√™n tƒ©nh d√¢n ch√≠ cao\n-- gi√° 7tr5 / 1 th√°ng\n- Li√™n h·ªá V≈© ƒë·ªÉ xem ph√≤ng ngay b√¢y gi·ªù\n==== kh√°ch ƒë·∫øn v·ªõi m√¨nh s·∫Ω ƒë∆∞·ª£c h·ªó tr·ª£ ƒë·∫øn khi kh√°ch ·ªü ·ªïn ƒë·ªãnh====\n\nNgo√†i ra c√≤n 2pn T√¢n B√¨nh: Xu√¢n H·ªìng v√† Nguy·ªÖn H·ªìng ƒê√†o",
                  "area": "20",
                  "status": "available",
                  "isDeleted": false,
                  "createdAt": "2023-02-07T18:02:10.708Z",
                  "updatedAt": "2023-02-07T18:02:10.708Z",
                  "__v": 0
              },
              {
                  "_id": "63c64e15fb49209fa1521178",
                  "author": {
                      "_id": "63bea9833cb3163905b4b085",
                      "name": "Apper",
                      "email": "testapp@gm.com",
                      "phoneNumber": "0906648572",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675273106/37d0d0f8369d408eb609d99a68273218_hmiinh.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "facebookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-11T12:20:19.964Z",
                      "updatedAt": "2023-02-10T17:30:42.804Z",
                      "__v": 0
                  },
                  "title": "üåøCƒÉn H·ªô M·ªõi Tinh G·∫ßn ƒê·∫°i H·ªçc",
                  "imageUrl": [
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675505545/7c4e6fffd0334bbf94bdc9c5ba0b0f88_qkhtnb_x2alzk_pdijpm.jpg"
                  ],
                  "address": "District 3",
                  "price": 6,
                  "noBedroom": 1,
                  "noBathroom": 2,
                  "description": "B·∫°n ƒëang mu·ªën t√¨m m·ªôt kh√¥ng gian tho·∫£i m√°i, r·ªông r√£i h∆°n cho ng∆∞·ªùi th√¢n b·∫°n b√® ƒë·∫øn ch∆°i th∆∞·ªùng xuy√™n?B·∫°n ƒëi l√†m Qu·∫≠n 10, Qu·∫≠n 3?B·∫°n mu·ªën ƒëi ch∆°i ·ªü qu·∫≠n 1?T√¥i xin tr√¢n tr·ªçng gi·ªõi thi·ªáu ƒë·∫øn b·∫°n CƒÉn h·ªô m√† b·∫°n ƒëang t√¨m ki·∫øm!!!--------------T·ªça l·∫°c t·∫°i 322 C√°ch Mang Th√°ng 8 ‚Äì Ph∆∞·ªùng 10 ‚Äì Qu·∫≠n 3H·∫ªm √¥ t√¥ c·ª±c l·ªõn, thu·∫≠n ti·ªán ƒëi l·∫°iKhu v·ª±c th√¥ng tho√°ng, kh√¥ng k·∫πt xeNgay CV L√™ Th·ªã Ri√™ng d·ªÖ d√†ng th·ªÉ d·ª•cQu√° ti·ªán ƒëi ch·ª£ H√≤a H∆∞ng, si√™u th·ªãC·∫°nh t√≤a nh√† Viettel, V√≤ng xoay D√¢n Ch·ªßTrang thi·∫øt b·ªã hi·ªán ƒë·∫°i si√™u ti·∫øt ki·ªám ƒëi·ªánGi·ªù gi·∫•c t·ª± do, b·∫£o v·ªá 24/24Wifi, thang m√°y t·ªëc ƒë·ªô caoNh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¨nh, chu ƒë√°o, x·ª≠ l√Ω s·ª± c·ªë 24h",
                  "area": "35",
                  "status": "rented",
                  "isDeleted": false,
                  "createdAt": "2023-01-17T07:28:21.615Z",
                  "updatedAt": "2023-02-04T10:12:26.260Z",
                  "__v": 0
              },
              {
                  "_id": "63d8a9798d98ca3a741a8145",
                  "author": {
                      "_id": "63bea9833cb3163905b4b085",
                      "name": "Apper",
                      "email": "testapp@gm.com",
                      "phoneNumber": "0906648572",
                      "avatarUrl": "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675273106/37d0d0f8369d408eb609d99a68273218_hmiinh.jpg",
                      "aboutMe": "hello",
                      "jobTitle": "UIT",
                      "facebookLink": "",
                      "instagramLink": "",
                      "createdAt": "2023-01-11T12:20:19.964Z",
                      "updatedAt": "2023-02-10T17:30:42.804Z",
                      "__v": 0
                  },
                  "title": "‚ú®‚ú®CƒÉn H·ªô 2 Ph√≤ng Ng·ªß_Full N·ªôi Th·∫•t_Ban C√¥ng Tho√°ng M√°t",
                  "imageUrl": [
                      "https://res.cloudinary.com/dq8f0rpf1/image/upload/v1675143545/37d0d0f8369d408eb609d99a68273218_jsmvfr.jpg"
                  ],
                  "address": "Binh Thanh District",
                  "price": 12.5,
                  "noBedroom": 2,
                  "noBathroom": 1,
                  "description": "Ho√†ng Qu√¢n Luxury Apartment - CHUY√äN M·ªåI LO·∫†I CƒÇN H·ªò ·ªû TP.HCM\n\n‚òéÔ∏è (ZALO / MESS / CALL ) g·∫∑p Ho√†ng Qu√¢n ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ nhi·ªát t√¨nh\n\n‚ú® CƒÉn H·ªô 2 Ph√≤ng Ng·ªß _ Full N·ªôi Th·∫•t _ Ban C√¥ng _M√°y Gi·∫∑t Ri√™ng T·∫°i Qu·∫≠n Bth\n\nüõë CAM K·∫æT H√åNH TH·∫¨T - GI√Å TH·∫¨T 100%\n\nPrice : 12,500,000 vnd\n\nGI√Å ƒê√É BAO G·ªíM T·∫§T C·∫¢ C√ÅC D·ªäCH V·ª§, TI·ªÜN √çCH SAU:\n\nüì£ M√°y gi·∫∑t, n∆°i ph∆°i qu·∫ßn √°o.\n\nüì£ B√†o tr√¨, s·ªØa ch·ªØa.\n\nüì£ Ch·ªó ƒë·ªÉ xe r·ªông r√£i.\n\nüì£ C·ª≠a v√¢n tay an ninh\n\nüì£ Camera 24/24 (Khu nh√† xe v√† nh·ªØng khu v·ª±c chung).\n\nüì£ D·ªçn v·ªá sinh h√†ng tu·∫ßn (khu v·ª±c chung) v√† thu gom r√°c h√†ng ng√†y.\n\nüì£ Gi·ªù gi·∫•c t·ª± do, kh√¥ng chung ch·ªß\n\nüì£ Full n·ªôi th·∫•t cao c·∫•p\n\nüì£ Ph√π h·ª£p v·ªõi c√°c b·∫°n sinh vi√™n , h·ªçc sinh hay c√°c b·∫°n ƒë√£ ƒëi l√†m , gia ƒë√¨nh , nh·ªØng ai mu·ªën c√≥ m·ªôt kh√¥ng gian tho·∫£i m√°i, ƒë·∫ßy ƒë·ªß ti·ªán nghi v√† ng√¥i nh√† ngh·ªâ ng∆°i sau 1 ng√†y d√†i l√†m vi·ªác m·ªát m·ªèi , ·ªü l√¢u d√†i\n\n‚úÖ Ho√†ng Qu√¢n Luxury Apartment ‚úÖ chuy√™n t·∫•t c·∫£ c√°c lo·∫°i cƒÉn h·ªô :\n\n‚úåÔ∏è Studio : 5-12tri·ªáu\n\n‚úåÔ∏è 1 Ph√≤ng Ng·ªß : t·ª´ 8 - 15tri·ªáu\n\n‚úåÔ∏è 2 Ph√≤ng ng·ªß : ch·ªâ t·ª´ 13 tri·ªáu",
                  "area": "60",
                  "status": "available",
                  "isDeleted": false,
                  "createdAt": "2023-01-31T05:39:05.907Z",
                  "updatedAt": "2023-01-31T05:39:05.907Z",
                  "__v": 0
              }
          ],
          "totalPage": 6,
          "countPosts": 54
      },
      "message": "Get All Post User Can See Success"
  });
  });

  test("GET / --> Get all posts an user can see with pagination", async () => {
    const { body } = await request(app)
      .get("/api/posts")
      .set(
        "Authorization",
        "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2M2IzZThkNjQwYjM0N2QxMjZlNmMzNDEiLCJpYXQiOjE2NzYyMDk5MjQsImV4cCI6MTY3NjI5NjMyNH0.paqUOcPhtOZw7_xmhpNeRjhCOwdF4eItvTCkuBv0EZo"
      )
      .query({ page: 1, limit: 10, name: "tro" })
      .expect(500);
    expect(body).toEqual({
      "errMessage": "\"name\" is not allowed"
  });
  });
});
